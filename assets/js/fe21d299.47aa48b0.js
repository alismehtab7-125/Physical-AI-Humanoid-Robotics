"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[979],{1505:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>c,metadata:()=>a,toc:()=>t});const a=JSON.parse('{"id":"module-01/workspace-and-packages","title":"Setting Up Workspace and Packages","description":"ROS 2 Colcon Workspace","source":"@site/docs/module-01/03-workspace-and-packages.md","sourceDirName":"module-01","slug":"/module-01/workspace-and-packages","permalink":"/Physical-AI-Humanoid-Robotics/docs/module-01/workspace-and-packages","draft":false,"unlisted":false,"editUrl":"https://github.com/alismehtab7-125/Physical-AI-Humanoid-Robotics/edit/main/docs/module-01/03-workspace-and-packages.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Setting Up Workspace and Packages"},"sidebar":"tutorialSidebar","previous":{"title":"Core ROS 2 Concepts: Nodes and Topics","permalink":"/Physical-AI-Humanoid-Robotics/docs/module-01/ros2-concepts"},"next":{"title":"Writing ROS 2 Nodes in Python (rclpy)","permalink":"/Physical-AI-Humanoid-Robotics/docs/module-01/python-ros-integration"}}');var i=s(4848),r=s(8453);const c={sidebar_position:3,title:"Setting Up Workspace and Packages"},l="Setting Up Workspace and Packages",o={},t=[{value:"ROS 2 Colcon Workspace",id:"ros-2-colcon-workspace",level:2},{value:"Creating a Colcon Workspace",id:"creating-a-colcon-workspace",level:2},{value:"Step 1: Create Workspace Directory",id:"step-1-create-workspace-directory",level:3},{value:"Step 2: Source ROS 2 Environment",id:"step-2-source-ros-2-environment",level:3},{value:"Step 3: Build the Workspace",id:"step-3-build-the-workspace",level:3},{value:"Step 4: Source the Workspace",id:"step-4-source-the-workspace",level:3},{value:"Creating a Python Package",id:"creating-a-python-package",level:2},{value:"Using ros2 pkg Command",id:"using-ros2-pkg-command",level:3},{value:"Package Structure Explained",id:"package-structure-explained",level:3},{value:"Customizing package.xml",id:"customizing-packagexml",level:3},{value:"Creating a Python Node",id:"creating-a-python-node",level:2},{value:"Basic Node Structure",id:"basic-node-structure",level:3},{value:"Making the Node Executable",id:"making-the-node-executable",level:3},{value:"Building and Running",id:"building-and-running",level:2},{value:"Building the Package",id:"building-the-package",level:3},{value:"Sourcing and Running",id:"sourcing-and-running",level:3},{value:"Adding Executables to setup.py",id:"adding-executables-to-setuppy",level:2},{value:"Useful Colcon Commands",id:"useful-colcon-commands",level:2},{value:"Build Specific Package",id:"build-specific-package",level:3},{value:"Build with Symlink Install (for faster rebuilds during development)",id:"build-with-symlink-install-for-faster-rebuilds-during-development",level:3},{value:"Run Tests",id:"run-tests",level:3},{value:"Clean Build",id:"clean-build",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues:",id:"common-issues",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"setting-up-workspace-and-packages",children:"Setting Up Workspace and Packages"})}),"\n",(0,i.jsx)(n.h2,{id:"ros-2-colcon-workspace",children:"ROS 2 Colcon Workspace"}),"\n",(0,i.jsxs)(n.p,{children:["A ",(0,i.jsx)(n.strong,{children:"workspace"})," in ROS 2 is a directory where you modify, build, and install ROS 2 packages. The standard build tool for ROS 2 is ",(0,i.jsx)(n.strong,{children:"Colcon"}),", which replaces the older catkin tools from ROS 1."]}),"\n",(0,i.jsx)(n.h2,{id:"creating-a-colcon-workspace",children:"Creating a Colcon Workspace"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-create-workspace-directory",children:"Step 1: Create Workspace Directory"}),"\n",(0,i.jsx)(n.p,{children:"First, create a directory for your workspace:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src\ncd ~/ros2_ws\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This creates a workspace named ",(0,i.jsx)(n.code,{children:"ros2_ws"})," with a ",(0,i.jsx)(n.code,{children:"src"})," directory where you'll place your source code."]}),"\n",(0,i.jsx)(n.h3,{id:"step-2-source-ros-2-environment",children:"Step 2: Source ROS 2 Environment"}),"\n",(0,i.jsx)(n.p,{children:"Before building, make sure ROS 2 is sourced:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash  # For Ubuntu with ROS 2 Humble\n# OR for other distributions:\n# source /opt/ros/iron/setup.bash   # Iron\n# source /opt/ros/rolling/setup.bash # Rolling\n"})}),"\n",(0,i.jsx)(n.p,{children:"On Windows:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cmd",children:'call "C:\\dev\\ros_humble\\setup.bat"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"step-3-build-the-workspace",children:"Step 3: Build the Workspace"}),"\n",(0,i.jsxs)(n.p,{children:["Even though the ",(0,i.jsx)(n.code,{children:"src"})," directory is empty, you can build the workspace:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"colcon build\n"})}),"\n",(0,i.jsx)(n.p,{children:"This will create three directories:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"build/"}),": Contains intermediate build files"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"install/"}),": Contains the installed packages (this is what you'll source)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"log/"}),": Contains build logs"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-4-source-the-workspace",children:"Step 4: Source the Workspace"}),"\n",(0,i.jsx)(n.p,{children:"After building, source the workspace to use your packages:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"source ~/ros2_ws/install/setup.bash\n"})}),"\n",(0,i.jsxs)(n.p,{children:["To make this permanent, add it to your ",(0,i.jsx)(n.code,{children:".bashrc"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'echo "source ~/ros2_ws/install/setup.bash" >> ~/.bashrc\n'})}),"\n",(0,i.jsx)(n.h2,{id:"creating-a-python-package",children:"Creating a Python Package"}),"\n",(0,i.jsx)(n.h3,{id:"using-ros2-pkg-command",children:"Using ros2 pkg Command"}),"\n",(0,i.jsxs)(n.p,{children:["To create a new Python package, use the ",(0,i.jsx)(n.code,{children:"ros2 pkg create"})," command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python my_robot_package\n"})}),"\n",(0,i.jsx)(n.p,{children:"This creates a basic Python package structure:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"my_robot_package/\n\u251c\u2500\u2500 my_robot_package/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 my_node.py\n\u251c\u2500\u2500 setup.py\n\u251c\u2500\u2500 setup.cfg\n\u251c\u2500\u2500 package.xml\n\u2514\u2500\u2500 resource/\n    \u2514\u2500\u2500 my_robot_package\n"})}),"\n",(0,i.jsx)(n.h3,{id:"package-structure-explained",children:"Package Structure Explained"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"my_robot_package/"}),": The main Python module directory"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"__init__.py"}),": Makes it a Python package"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"my_node.py"}),": A sample Python node file"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"setup.py"}),": Python package setup file"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"setup.cfg"}),": Configuration for installation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"package.xml"}),": Package manifest with dependencies and metadata"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"resource/"}),": Contains package resources"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"customizing-packagexml",children:"Customizing package.xml"}),"\n",(0,i.jsxs)(n.p,{children:["Edit the ",(0,i.jsx)(n.code,{children:"package.xml"})," file to add dependencies and metadata:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>my_robot_package</name>\n  <version>0.0.0</version>\n  <description>Example ROS 2 Python package</description>\n  <maintainer email="user@example.com">Your Name</maintainer>\n  <license>Apache-2.0</license>\n\n  <depend>rclpy</depend>\n  <depend>std_msgs</depend>\n\n  <test_depend>ament_copyright</test_depend>\n  <test_depend>ament_flake8</test_depend>\n  <test_depend>ament_pep257</test_depend>\n  <test_depend>python3-pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,i.jsx)(n.h2,{id:"creating-a-python-node",children:"Creating a Python Node"}),"\n",(0,i.jsx)(n.h3,{id:"basic-node-structure",children:"Basic Node Structure"}),"\n",(0,i.jsxs)(n.p,{children:["Create or modify ",(0,i.jsx)(n.code,{children:"my_robot_package/my_node.py"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass MyNode(Node):\n    def __init__(self):\n        super().__init__('my_node')\n        self.publisher = self.create_publisher(String, 'my_topic', 10)\n        self.subscription = self.create_subscription(\n            String,\n            'my_input_topic',\n            self.listener_callback,\n            10\n        )\n        self.timer = self.create_timer(0.5, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'Hello from Python: {self.i}'\n        self.publisher.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\n        self.i += 1\n\n    def listener_callback(self, msg):\n        self.get_logger().info(f'I heard: \"{msg.data}\"')\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = MyNode()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"making-the-node-executable",children:"Making the Node Executable"}),"\n",(0,i.jsx)(n.p,{children:"Make the node file executable:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chmod +x my_robot_package/my_node.py\n"})}),"\n",(0,i.jsx)(n.h2,{id:"building-and-running",children:"Building and Running"}),"\n",(0,i.jsx)(n.h3,{id:"building-the-package",children:"Building the Package"}),"\n",(0,i.jsx)(n.p,{children:"From the workspace root:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select my_robot_package\n"})}),"\n",(0,i.jsx)(n.p,{children:"Or build all packages:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build\n"})}),"\n",(0,i.jsx)(n.h3,{id:"sourcing-and-running",children:"Sourcing and Running"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"source ~/ros2_ws/install/setup.bash\nros2 run my_robot_package my_node\n"})}),"\n",(0,i.jsx)(n.h2,{id:"adding-executables-to-setuppy",children:"Adding Executables to setup.py"}),"\n",(0,i.jsxs)(n.p,{children:["To make your nodes available as ROS 2 executables, edit ",(0,i.jsx)(n.code,{children:"setup.py"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\nimport os\nfrom glob import glob\n\npackage_name = 'my_robot_package'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        (os.path.join('share', package_name), glob('launch/*launch.[pxy][yma]*')),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Your Name',\n    maintainer_email='you@example.com',\n    description='Example ROS 2 Python package',\n    license='Apache-2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'my_node = my_robot_package.my_node:main',\n        ],\n    },\n)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"useful-colcon-commands",children:"Useful Colcon Commands"}),"\n",(0,i.jsx)(n.h3,{id:"build-specific-package",children:"Build Specific Package"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-select my_robot_package\n"})}),"\n",(0,i.jsx)(n.h3,{id:"build-with-symlink-install-for-faster-rebuilds-during-development",children:"Build with Symlink Install (for faster rebuilds during development)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"colcon build --symlink-install\n"})}),"\n",(0,i.jsx)(n.h3,{id:"run-tests",children:"Run Tests"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"colcon test\ncolcon test-result --all\n"})}),"\n",(0,i.jsx)(n.h3,{id:"clean-build",children:"Clean Build"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"rm -rf build/ install/ log/\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use meaningful package names"}),": Follow ROS naming conventions (lowercase with underscores)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Organize your code"}),": Group related functionality in logical packages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Document dependencies"}),": List all required dependencies in ",(0,i.jsx)(n.code,{children:"package.xml"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use virtual environments"}),": For development, consider using Python virtual environments"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Test your packages"}),": Write unit tests and integration tests"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Follow coding standards"}),": Use linters like flake8 for Python code"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"common-issues",children:"Common Issues:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Package not found"}),": Make sure to source the workspace before running"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Import errors"}),": Check that dependencies are listed in ",(0,i.jsx)(n.code,{children:"package.xml"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Build errors"}),": Verify that all files have correct permissions and syntax"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"With this foundation, you can now create and manage ROS 2 packages for your robotic applications!"})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>l});var a=s(6540);const i={},r=a.createContext(i);function c(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);